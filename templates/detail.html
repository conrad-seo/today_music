<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- 부트스트랩 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <!--    css부트스크랩-->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
          crossorigin="anonymous"></script>
  <!--    jquery쿠키-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
  <!-- 폰트 -->
  <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
  <title>오노추</title>


  <style>
      * {
          font-family: 'Gowun Dodum', sans-serif;
      }

      .header {
          width: 100%;
      }

      .header > div {
          hegith: 50px;
      }

      .icon {
          float: left;
      }

      .showUser {
          float: right;
          width: 500px;
          font-size: 20px;
          text-align: right;
      }

      .showUser > span {
          margin-right: 20px;
      }

      .mytitle {
          width: 100%;
          height: 300px;
          background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://wallpapercave.com/dwp1x/wp5694376.jpg');
          background-position: center;
          background-size: cover;
          color: white;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
      }

      .mytitle > button {
          width: 200px;
          height: 50px;
          background-color: transparent;
          color: white;
          border-radius: 50px;
          border: 1px solid white;
          margin-top: 10px;
      }

      .listDetail {
          width: 95%;
          display: flex;
          margin: auto;
          padding: 50px 50px;
          max-width: 1200px;
      }

      .linkInfo {
          width: 400px;
          float: left;
      }

      .detailImg {
          width: 400px;
          height: 250px;
      }

      .detailInfo {
          margin-top: 20px;
          height: 250px;
      }

      /*.detailInfo > .writerId {*/
      /*    float: left;*/
      /*}*/

      /*.detailInfo > .star {*/
      /*    float: right;*/
      /*}*/

      /*.detailInfo > hr {*/
      /*    clear: both;*/
      /*}*/

      .replyInfo {
          width: 650px;
          margin-left: 50px;
      }

      .replyInfo .form-control {
          height: 50px;
      }

      .readReply > .card {
          margin-bottom: 10px;
      }
  </style>
  <script>
      $(document).ready(function () {
          show_comment();
      });

      function input_comment() {
          let num = '{{list.num}}'
          let nick = '{{nickname}}'
          let comment = $('#comment').val()
          console.log(num)
          if (comment === '') {
              alert('댓글 내용을 입력해주세요.')
          } else {
              $.ajax({
                  type: 'POST',
                  url: '/in_comment',
                  data: {num_give: num, nick_give: nick, comment_give: comment},
                  success: function (response) {
                      alert(response['msg'])
                      window.location.reload()
                  }
              });
          }
      }

      function show_comment() {
          let num = '{{list.num}}'
          $.ajax({
              type: "POST",
              url: "/show_comment",
              data: {num_give: num},
              success: function (response) {
                  let rows = response['smn_list']
                  let temp_html = '';
                  for (let i = 0; i < rows.length; i++) {
                      let comment_nick = rows[i]['nick']
                      console.log(comment_nick)

                      let comment = rows[i]['comment']
                      console.log(comment)
                      temp_html += `<h5 id="comment_nick">${comment_nick}</h5>
                                    <p id="comment" >${comment}</p>`
                  }
                  $('#card-body').append(temp_html)
              }
          });
      }
  </script>
</head>
<body>
<div class="header">
  <div class="icon"><!-- 추후 아이콘 들어갈 자리 --></div>
  <div class="showUser"><span>{{nickname}}님 환영합니다!</span></div>
</div>
<div class="mytitle">
  <h1>오노추: 오늘의 노래 추천</h1>
  <button onClick="location.href='index.html'">이전 페이지</button>
</div>
<div class="listDetail">
  <div class="linkInfo">
    <section class="detailImg">
      <img src="#" class="thumbnail" alt="">
    </section>
    <section class="detailInfo">
      <h1>{{list.num}}</h1>
      <span><h1>{{list.title}}</h1></span>
      <embed width="560" height="315" src="{{list.url}}" title="YouTube video player" frameborder="0"
             allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
             allowfullscreen></embed>
      <hr/>
      <span class="writerId"><h5>{{nickname}}</h5></span>
      <span class="star"><h5>{{list.star}}</h5></span>
      <hr/>
      <span><h6>{{list.comment}}</h6></span>
    </section>
  </div>
  <div class="replyInfo">
    <section class="insertReply">
      <div class="mb-3">
        <div class="input-group mb-3">
          <input id="comment" type="text" class="form-control" placeholder="이 플레이리스트에 대해 코멘트를 남겨주세요🎵">
          <button onclick="input_comment()" class="btn btn-outline-secondary" id="writeReply">등록하기</button>
        </div>
        <div class="card-body" id="card-body">

        </div>
      </div>
    </section>
  </div>
</div>
</body>
</html>